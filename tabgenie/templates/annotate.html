<!DOCTYPE html>
<html>

<head>
  <title>D2T Annotation</title>
  <link rel="stylesheet" media="screen" href="{{ host_prefix }}/static/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="{{ host_prefix }}/static/css/custom.css">
  <link rel="stylesheet" type="text/css" href="{{ host_prefix }}/static/css/d3graphs.css">
  <!-- <link rel="shortcut icon" href="{{ host_prefix }}/static/img/favicon.ico"> -->
  <meta name="viewport" content="width=1024">
  <script src="{{ host_prefix }}/static/js/jquery.min.js"></script>
  <script src="{{ host_prefix }}/static/js/popper.min.js"></script>
  <script src="{{ host_prefix }}/static/js/bootstrap.min.js"></script>
  <script src="{{ host_prefix }}/static/js/jquery.highlight-within-textarea.js"></script>
  <script src="{{ host_prefix }}/static/js/jsonview.js"></script>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/windbarb.js"></script>
  <script src="https://code.highcharts.com/modules/pattern-fill.js"></script>
  <script src="https://code.highcharts.com/modules/data.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://code.highcharts.com/modules/accessibility.js"></script>
  <link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.3.5/split.min.js"></script>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="{{ host_prefix }}/static/js/meteogram.js"></script>
  <script src="{{ host_prefix }}/static/js/d3graphs.js"></script>
  <script src="//underscorejs.org/underscore-min.js"></script>
  <script src="//backbonejs.org/backbone-min.js"></script>
  <script src="{{ host_prefix }}/static/js/backbone-relational.js"></script>
  <script src="{{ host_prefix }}/static/js/backbone.marionette.min.js"></script>
  <script src="{{ host_prefix }}/static/js/underscore.string.min.js"></script>
  <script src="{{ host_prefix }}/static/js/ypet.js"></script>
</head>


<body class="body">
  <nav class="navbar navbar-light bg-annotate">
    <div class="container navbar-left">
      <a class="navbar-brand" href="#">
        <!-- <img src="{{ host_prefix }}/static/img/genie.png" width="25px"> -->
        <!-- Data-to-text Annotation -->
      </a>
      <!-- <div class="navblock">
        <ul class="navblock pagination">
          
        </ul>
      </div> -->
      <div class="navblock" id="actions-area">
        <ul class="pagination" id="nav-example-cnt">
        </ul>

      </div>
      <div class="navblock">

        <!-- submit annotations button -->
        <ul class="pagination" style="margin-left: 10px;">
          <li class="page-item">
            <button type="button" class="btn btn-sm btn-success" id="submit-annotations-btn"
              onclick="submit_annotations();" style="display: none;">üëâÔ∏è Submit annotations</button>
          </li>
          <!-- <ul class="pagination" style="margin-left: 10px;">
            <li class="page-item">
              <a class="page-link" id="raw-btn" onclick="toggle_raw();" autocomplete="off">
                <img src="{{ host_prefix }}/static/img/code.png" width="15px" class="button-bw-icon" />
              </a>
            </li>
            <li class="page-item">
              <a class="page-link" data-bs-toggle="modal" data-bs-target="#info-modal">
                <img src="{{ host_prefix }}/static/img/unicode/info.png" width="12px" class="button-bw-icon" />
              </a>
            </li>

          </ul> -->
      </div>
    </div>
  </nav>


  <div class="large-container container">
    <div class="row">
      <div class="split col-12">
        <div id="centerpanel" class="collapse show">
          <div class="tab-content">
            <div id='tabulararea' class="tab-pane sidepanel-panel active" role="tabpanel">
              <div class="d-flex align-items-center justify-content-center">
                <div id="dataset-spinner" class="spinner-border" role="status" style="display: none">
                  <span class="sr-only"></span>
                </div>
              </div>
              <div id='tablearea'> </div>
              <div id='rawarea' style="display: none"> </div>
            </div>
          </div>
        </div>
        <div id="rightpanel" class="collapse show">
          <div id='sidepanel-content' class="tab-content">

            <div id='output-content'>
              <div id='output-instructions'>
                Annotate all the <b>errors</b> in the following text <b>given the data on the left side</b>. <br>
                <br>Use your mouse to <b>highlight specific parts of the text</b> containing the errors. Repeatedly
                click
                on the highlighted text to switch between the following error
                categories:

                <ol>
                  <li><span style="background-color: #FFBCBC"><b>Incorrect fact</b></span> (mouse drag): The fact
                    in the
                    text contradicts the data.</li>
                  <li><span style="background-color: #e9d2ff"><b>Not checkable</b></span> (mouse drag + 1
                    click):
                    The
                    fact in the text cannot be checked given the data.</li>
                  <li><span style="background-color: #FFF79F"><b>Misleading</b></span> (mouse drag + 2 clicks):
                    The fact in the text is misleading in the given context. </li>
                  <li><span style="background-color: #ffd99f"><b>Irrelevant</b></span> (mouse drag + 3 clicks):
                    The text is irrelevant. </li>
                  <li><span style="background-color: #bbbbbb"><b>Other</b></span> (mouse drag + 4 clicks):
                    An error which does not fit any previous category. </li>

                </ol>
                <br>If you are in doubts, select the shortest span that contains the error.
                Once you think you have marked all the errors present in the text, click the <b> ‚úÖ Mark example as
                  complete</b>
                button (you can still update the annotation later). You will be able to submit the annotations once they
                are all are
                marked
                as complete.

              </div>
              <div id='outputarea'>
                <div id='text-type'><b>Weather forecast</b></div>
              </div>

              <div class="annotation-type-list"> </div>
              <div class="annotation-list"> </div>
            </div>
            <div class="d-flex align-items-center justify-content-center" id="submit-annotation-box">
              <div class="btn-group" role="group">
                <button type="button" class="btn btn-sm btn-success" onclick="mark_annotation_as_complete();">‚úÖ Mark
                  example as
                  complete</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="overlay-start" class="overlay">
    <div id="overlay-start-content" class="overlay-content">
      <h1>Welcome!</h1>

      <p>Your task is to <b>annotate errors</b> in the text describing the data. You will see the data on the
        left side of the screen and the text on the right side of the screen.
      </p>
      <p>
        There are five
        types of errors that you can mark in the generated text:</p>
      <li><span style="background-color: #FFBCBC"><b>Incorrect fact</b></span>: The fact
        in the
        text contradicts the data.</li>
      <li><span style="background-color: #e9d2ff"><b>Not checkable</b></span>:
        The
        fact in the text cannot be checked given the data.</li>
      <li><span style="background-color: #FFF79F"><b>Misleading</b></span>:
        The fact in the text is misleading in the given context. </li>
      <li><span style="background-color: #ffd99f"><b>Irrelevant</b></span>:
        The text is irrelevant. </li>
      <li><span style="background-color: #bbbbbb"><b>Other</b></span>:
        An error which does not fit any previous category. </li>
      <br>
      <p> Use your mouse to <b>highlight specific
          parts of the text</b> containing the errors. To switch between error
        categories, repeatedly click on the highlighted text. If you don't remember everything, don't worry ‚Äì you will
        also have access
        to these instructions during
        the task.</p>

      <div class="accordion" id="accordionExample">
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseOne">
              What is the source of the data and the texts?
            </button>
          </h2>
          <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              The data is downloaded from public sources
              <!-- (ourworldindata.com, rapidapi.com, wikidata.com, openweathermap.org, gsmarena.com).  -->
              (<a href="https://ourworldindata.org/">ourworldindata.com</a>, <a
                href="https://rapidapi.com/">rapidapi.com</a>, <a href="https://www.wikidata.org/">wikidata.com</a>, <a
                href="https://openweathermap.org/">openweathermap.org</a>, <a
                href="https://www.gsmarena.com/">gsmarena.com</a>).
              The texts are
              generated by open-access large language models.
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
              data-bs-target="#collapseTwo">
              What is the purpose of the research?
            </button>
          </h2>
          <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              The research is conducted by the NLP research group at Charles University in Prague. Your annotations will
              help
              evaluating and
              improving data-to-text generation systems based on open-access language models.
            </div>
          </div>
        </div>

      </div>
      <br>
      <button id="hideOverlayBtn" class="btn btn-danger">I understand, let's begin!</button>
    </div>
  </div>

  <div id="overlay-end" class="overlay" style="display: none">
    <div id="overlay-end-content" class="overlay-content">
      <h1>Thank you!</h1>

      <p>Your annotations have been submitted.</p>
      <p>Your Prolific completion code is <b>{{ compl_code }}</b>.</p>
      <a href="https://app.prolific.co/submissions/complete?cc={{ compl_code }}" class="btn btn-primary">Return to
        Prolific</a>
    </div>
  </div>



</body>


<script>
  window.url_prefix = "{{ host_prefix }}";
  window.annotation_set = {{ annotation_set | tojson | safe }};
  window.mode = "annotate";
</script>

<script src="{{ host_prefix }}/static/js/custom.js"></script>